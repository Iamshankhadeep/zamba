
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Zamba is a command-line tool built in Python to automatically identify the species seen in camera trap videos from sites in central Africa.">
      
      
      
        <link rel="canonical" href="https://zamba.drivendata.org/docs/~latest/api-reference/data-video/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.5">
    
    
      
        <title>zamba.data.video - Zamba</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2d9f7617.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/custom_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#zambadatavideo" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Zamba" class="md-header__button md-logo" aria-label="Zamba" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Zamba
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              zamba.data.video
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/drivendataorg/zamba/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Zamba" class="md-nav__button md-logo" aria-label="Zamba" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Zamba
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/drivendataorg/zamba/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        Installing zamba
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          User Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          User Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../predict-tutorial/" class="md-nav__link">
        Classifying unlabeled videos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../train-tutorial/" class="md-nav__link">
        Training a model on labeled videos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../debugging/" class="md-nav__link">
        Debugging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../extra-options/" class="md-nav__link">
        Guide to common optional parameters
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Available Models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Available Models" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Available Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/species-detection/" class="md-nav__link">
        Species detection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/densepose/" class="md-nav__link">
        DensePose
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Advanced Options
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced Options" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Advanced Options
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configurations/" class="md-nav__link">
        All configuration options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../yaml-config/" class="md-nav__link">
        Using YAML configuration files
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../contribute/">Contribute to zamba</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Contribute to zamba" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Contribute to zamba
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../changelog/">Changelog</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Changelog" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Changelog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_1" type="checkbox" id="__nav_8_1" checked>
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_1">
          zamba.data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="zamba.data" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_1">
          <span class="md-nav__icon md-icon"></span>
          zamba.data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-metadata/" class="md-nav__link">
        zamba.data.metadata
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          zamba.data.video
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        zamba.data.video
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zamba.data.video-classes" class="md-nav__link">
    Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zamba.data.video-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_2" type="checkbox" id="__nav_8_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_2">
          zamba.models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="zamba.models" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_2">
          <span class="md-nav__icon md-icon"></span>
          zamba.models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models-config/" class="md-nav__link">
        zamba.models.config
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_2_2" type="checkbox" id="__nav_8_2_2" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_2_2">
          zamba.models.densepose
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="zamba.models.densepose" data-md-level="3">
        <label class="md-nav__title" for="__nav_8_2_2">
          <span class="md-nav__icon md-icon"></span>
          zamba.models.densepose
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../densepose_config/" class="md-nav__link">
        zamba.models.densepose.config
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../densepose_manager/" class="md-nav__link">
        zamba.models.densepose.densepose_manager
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models-efficientnet_models/" class="md-nav__link">
        zamba.models.efficientnet_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models-model_manager/" class="md-nav__link">
        zamba.models.model_manager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models-slowfast_models/" class="md-nav__link">
        zamba.models.slowfast_models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../models-utils/" class="md-nav__link">
        zamba.models.utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_3" type="checkbox" id="__nav_8_3" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_3">
          zamba.object_detection
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="zamba.object_detection" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_3">
          <span class="md-nav__icon md-icon"></span>
          zamba.object_detection
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../object_detection-yolox/" class="md-nav__link">
        zamba.object_detection.yolox
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_4" type="checkbox" id="__nav_8_4" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_4">
          zamba.pytorch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="zamba.pytorch" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_4">
          <span class="md-nav__icon md-icon"></span>
          zamba.pytorch
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pytorch-dataloaders/" class="md-nav__link">
        zamba.pytorch.dataloaders
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pytorch-finetuning/" class="md-nav__link">
        zamba.pytorch.finetuning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pytorch-layers/" class="md-nav__link">
        zamba.pytorch.layers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pytorch-transforms/" class="md-nav__link">
        zamba.pytorch.transforms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pytorch-utils/" class="md-nav__link">
        zamba.pytorch.utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_5" type="checkbox" id="__nav_8_5" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_5">
          zamba.pytorch_lightning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="zamba.pytorch_lightning" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_5">
          <span class="md-nav__icon md-icon"></span>
          zamba.pytorch_lightning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../pytorch_lightning-utils/" class="md-nav__link">
        zamba.pytorch_lightning.utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exceptions/" class="md-nav__link">
        zamba.exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metrics/" class="md-nav__link">
        zamba.metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../settings/" class="md-nav__link">
        zamba.settings
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#zamba.data.video-classes" class="md-nav__link">
    Classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zamba.data.video-functions" class="md-nav__link">
    Functions
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/drivendataorg/zamba/edit/master/docs/api-reference/data-video.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



<h1 id="zambadatavideo">zamba.data.video<a class="headerlink" href="#zambadatavideo" title="Permanent link">&para;</a></h1>


  <div class="doc doc-object doc-module">


    <div class="doc doc-contents first">




  <div class="doc doc-children">





<h2 id="zamba.data.video-classes">Classes<a href="#zamba.data.video-classes" class="headerlink" title="Permanent link">&para;</a></h2>

  <div class="doc doc-object doc-class">



<h3 id="zamba.data.video.VideoLoaderConfig" class="doc doc-heading">
        <code>
VideoLoaderConfig            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Configuration for load_video_frames.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>crop_bottom_pixels</code></td>
        <td><code>int</code></td>
        <td><p>Number of pixels to crop from the bottom of the video
(prior to resizing to <code>video_height</code>).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>i_frames</code></td>
        <td><code>bool</code></td>
        <td><p>Only load the I-Frames. See
https://en.wikipedia.org/wiki/Video_compression_picture_types#Intra-coded_(I)<em>frames/slices</em>(key_frames)</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>scene_threshold</code></td>
        <td><code>float</code></td>
        <td><p>Only load frames that correspond to scene changes.
See http://www.ffmpeg.org/ffmpeg-filters.html#select_002c-aselect</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>megadetector_lite_config</code></td>
        <td><code>MegadetectorLiteYoloXConfig</code></td>
        <td><p>Configuration of
MegadetectorLiteYoloX frame selection model.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>frame_selection_height</code></td>
        <td><code>int</code></td>
        <td><p>Resize the video to this height in pixels, prior to
frame selection. If None, the full size video will be used for frame selection. Using full
size images (setting to None) is recommended for MegadetectorLite, especially if your
species of interest are smaller.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>frame_selection_width</code></td>
        <td><code>int</code></td>
        <td><p>Resize the video to this width in pixels, prior to
frame selection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>total_frames</code></td>
        <td><code>int</code></td>
        <td><p>Number of frames that should ultimately be returned.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>ensure_total_frames</code></td>
        <td><code>bool</code></td>
        <td><p>Selecting the number of frames by resampling may result in one
more or fewer frames due to rounding. If True, ensure the requested number of frames
is returned by either clipping or duplicating the final frame. Raises an error if no
frames have been selected. Otherwise, return the array unchanged.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>fps</code></td>
        <td><code>float</code></td>
        <td><p>Resample the video evenly from the entire duration to a specific
number of frames per second.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>early_bias</code></td>
        <td><code>bool</code></td>
        <td><p>Resamples to 24 fps and selects 16 frames biased toward the
front (strategy used by competition winner).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>frame_indices</code></td>
        <td><code>list(int)</code></td>
        <td><p>Select specific frame numbers. Note: frame selection
is done after any resampling.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>evenly_sample_total_frames</code></td>
        <td><code>bool</code></td>
        <td><p>Reach the total number of frames specified by
evenly sampling from the duration of the video. Defaults to False.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>pix_fmt</code></td>
        <td><code>str</code></td>
        <td><p>ffmpeg pixel format, defaults to 'rgb24' for RGB channels; can be
changed to 'bgr24' for BGR.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>model_input_height</code></td>
        <td><code>int</code></td>
        <td><p>After frame selection, resize the video to this height
in pixels.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>model_input_width</code></td>
        <td><code>int</code></td>
        <td><p>After frame selection, resize the video to this width in
pixels.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>cache_dir</code></td>
        <td><code>Path</code></td>
        <td><p>Cache directory where preprocessed videos will be saved
upon first load. Alternatively, can be set with VIDEO_CACHE_DIR environment variable.
Defaults to None, which means videos will not be cached. Provided there is enough space
on your machine, it is highly encouraged to cache videos for training as this will
speed up all subsequent epochs. If you are predicting on the same videos with the
same video loader configuration, this will save time on future runs.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>cleanup_cache</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to delete the cache dir after training or predicting ends.
Defaults to False.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">VideoLoaderConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configuration for load_video_frames.</span>

<span class="sd">    Args:</span>
<span class="sd">        crop_bottom_pixels (int, optional): Number of pixels to crop from the bottom of the video</span>
<span class="sd">            (prior to resizing to `video_height`).</span>
<span class="sd">        i_frames (bool, optional): Only load the I-Frames. See</span>
<span class="sd">            https://en.wikipedia.org/wiki/Video_compression_picture_types#Intra-coded_(I)_frames/slices_(key_frames)</span>
<span class="sd">        scene_threshold (float, optional): Only load frames that correspond to scene changes.</span>
<span class="sd">            See http://www.ffmpeg.org/ffmpeg-filters.html#select_002c-aselect</span>
<span class="sd">        megadetector_lite_config (MegadetectorLiteYoloXConfig, optional): Configuration of</span>
<span class="sd">            MegadetectorLiteYoloX frame selection model.</span>
<span class="sd">        frame_selection_height (int, optional): Resize the video to this height in pixels, prior to</span>
<span class="sd">            frame selection. If None, the full size video will be used for frame selection. Using full</span>
<span class="sd">            size images (setting to None) is recommended for MegadetectorLite, especially if your</span>
<span class="sd">            species of interest are smaller.</span>
<span class="sd">        frame_selection_width (int, optional): Resize the video to this width in pixels, prior to</span>
<span class="sd">            frame selection.</span>
<span class="sd">        total_frames (int, optional): Number of frames that should ultimately be returned.</span>
<span class="sd">        ensure_total_frames (bool): Selecting the number of frames by resampling may result in one</span>
<span class="sd">            more or fewer frames due to rounding. If True, ensure the requested number of frames</span>
<span class="sd">            is returned by either clipping or duplicating the final frame. Raises an error if no</span>
<span class="sd">            frames have been selected. Otherwise, return the array unchanged.</span>
<span class="sd">        fps (float, optional): Resample the video evenly from the entire duration to a specific</span>
<span class="sd">            number of frames per second.</span>
<span class="sd">        early_bias (bool, optional): Resamples to 24 fps and selects 16 frames biased toward the</span>
<span class="sd">            front (strategy used by competition winner).</span>
<span class="sd">        frame_indices (list(int), optional): Select specific frame numbers. Note: frame selection</span>
<span class="sd">            is done after any resampling.</span>
<span class="sd">        evenly_sample_total_frames (bool, optional): Reach the total number of frames specified by</span>
<span class="sd">            evenly sampling from the duration of the video. Defaults to False.</span>
<span class="sd">        pix_fmt (str, optional): ffmpeg pixel format, defaults to &#39;rgb24&#39; for RGB channels; can be</span>
<span class="sd">            changed to &#39;bgr24&#39; for BGR.</span>
<span class="sd">        model_input_height (int, optional): After frame selection, resize the video to this height</span>
<span class="sd">            in pixels.</span>
<span class="sd">        model_input_width (int, optional): After frame selection, resize the video to this width in</span>
<span class="sd">            pixels.</span>
<span class="sd">        cache_dir (Path, optional): Cache directory where preprocessed videos will be saved</span>
<span class="sd">            upon first load. Alternatively, can be set with VIDEO_CACHE_DIR environment variable.</span>
<span class="sd">            Defaults to None, which means videos will not be cached. Provided there is enough space</span>
<span class="sd">            on your machine, it is highly encouraged to cache videos for training as this will</span>
<span class="sd">            speed up all subsequent epochs. If you are predicting on the same videos with the</span>
<span class="sd">            same video loader configuration, this will save time on future runs.</span>
<span class="sd">        cleanup_cache (bool): Whether to delete the cache dir after training or predicting ends.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">crop_bottom_pixels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">i_frames</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">scene_threshold</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">megadetector_lite_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MegadetectorLiteYoloXConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">frame_selection_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">frame_selection_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">total_frames</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">ensure_total_frames</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">fps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">early_bias</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">frame_indices</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">evenly_sample_total_frames</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">pix_fmt</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rgb24&quot;</span>
    <span class="n">model_input_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">model_input_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">cache_dir</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">cleanup_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">extra</span> <span class="o">=</span> <span class="s2">&quot;forbid&quot;</span>

    <span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;cache_dir&quot;</span><span class="p">,</span> <span class="n">always</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">validate_video_cache_dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">cache_dir</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set up cache directory for preprocessed videos. Config argument takes precedence</span>
<span class="sd">        over environment variable.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cache_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cache_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;VIDEO_CACHE_DIR&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cache_dir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cache_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">)</span>
            <span class="n">cache_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">cache_dir</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">check_height_and_width</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;frame_selection_height&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;frame_selection_width&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Must provide both frame_selection_height and frame_selection_width or neither. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;model_input_height&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;model_input_width&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Must provide both model_input_height and model_input_width or neither. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">check_fps_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;fps&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;i_frames&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;scene_threshold&quot;</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;fps cannot be used with evenly_sample_total_frames, i_frames, or scene_threshold. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">check_i_frame_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;scene_threshold&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;i_frames&quot;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;i_frames cannot be used with scene_threshold. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">check_early_bias_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;early_bias&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;i_frames&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;scene_threshold&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;fps&quot;</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;early_bias cannot be used with i_frames, scene_threshold, total_frames, evenly_sample_total_frames, or fps. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">check_frame_indices_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;frame_indices&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;scene_threshold&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;i_frames&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;early_bias&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;frame_indices cannot be used with total_frames, scene_threshold, i_frames, early_bias, or evenly_sample_total_frames. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">check_megadetector_lite_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;megadetector_lite_config&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;early_bias&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;megadetector_lite_config cannot be used with early_bias or evenly_sample_total_frames. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">check_evenly_sample_total_frames_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;total_frames must be specified if evenly_sample_total_frames is used. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;scene_threshold&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;i_frames&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;fps&quot;</span><span class="p">]</span>
            <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;early_bias&quot;</span><span class="p">]</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;evenly_sample_total_frames cannot be used with scene_threshold, i_frames, fps, or early_bias. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">values</span>

    <span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">validate_total_frames</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;megadetector_lite_config&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># set n frames for megadetector_lite_config if only specified by total_frames</span>
            <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;megadetector_lite_config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">n_frames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">values</span><span class="p">[</span><span class="s2">&quot;megadetector_lite_config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span>

            <span class="c1"># set total frames if only specified in megadetector_lite_config</span>
            <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;megadetector_lite_config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">n_frames</span>

        <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.cache_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cache_dir</span><span class="p">:</span> <span class="n">Path</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.cache_dir" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.cleanup_cache" class="doc doc-heading">
<code class="highlight language-python"><span class="n">cleanup_cache</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.cleanup_cache" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.crop_bottom_pixels" class="doc doc-heading">
<code class="highlight language-python"><span class="n">crop_bottom_pixels</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.crop_bottom_pixels" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.early_bias" class="doc doc-heading">
<code class="highlight language-python"><span class="n">early_bias</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.early_bias" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.ensure_total_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ensure_total_frames</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.ensure_total_frames" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.evenly_sample_total_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">evenly_sample_total_frames</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.evenly_sample_total_frames" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.fps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fps</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.fps" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.frame_indices" class="doc doc-heading">
<code class="highlight language-python"><span class="n">frame_indices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.frame_indices" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.frame_selection_height" class="doc doc-heading">
<code class="highlight language-python"><span class="n">frame_selection_height</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.frame_selection_height" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.frame_selection_width" class="doc doc-heading">
<code class="highlight language-python"><span class="n">frame_selection_width</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.frame_selection_width" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.i_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">i_frames</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.i_frames" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.megadetector_lite_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">megadetector_lite_config</span><span class="p">:</span> <span class="n">MegadetectorLiteYoloXConfig</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.megadetector_lite_config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.model_input_height" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_input_height</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.model_input_height" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.model_input_width" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_input_width</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.model_input_width" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.pix_fmt" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pix_fmt</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.pix_fmt" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.scene_threshold" class="doc doc-heading">
<code class="highlight language-python"><span class="n">scene_threshold</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.scene_threshold" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoLoaderConfig.total_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">total_frames</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.total_frames" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>




  <div class="doc doc-object doc-class">



<h5 id="zamba.data.video.VideoLoaderConfig.Config" class="doc doc-heading">
        <code>
Config        </code>



<a href="#zamba.data.video.VideoLoaderConfig.Config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
    <span class="n">extra</span> <span class="o">=</span> <span class="s2">&quot;forbid&quot;</span>
</code></pre></div>
        </details>


    </div>

  </div>



<h4 id="zamba.data.video.VideoLoaderConfig-methods">Methods<a href="#zamba.data.video.VideoLoaderConfig-methods" class="headerlink" title="Permanent link">&para;</a></h4>

  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.VideoLoaderConfig.check_early_bias_compatibility" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_early_bias_compatibility</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.check_early_bias_compatibility" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">check_early_bias_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;early_bias&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="n">values</span><span class="p">[</span><span class="s2">&quot;i_frames&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;scene_threshold&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;fps&quot;</span><span class="p">]</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;early_bias cannot be used with i_frames, scene_threshold, total_frames, evenly_sample_total_frames, or fps. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.VideoLoaderConfig.check_evenly_sample_total_frames_compatibility" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_evenly_sample_total_frames_compatibility</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.check_evenly_sample_total_frames_compatibility" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">check_evenly_sample_total_frames_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;total_frames must be specified if evenly_sample_total_frames is used. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="n">values</span><span class="p">[</span><span class="s2">&quot;scene_threshold&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;i_frames&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;fps&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;early_bias&quot;</span><span class="p">]</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;evenly_sample_total_frames cannot be used with scene_threshold, i_frames, fps, or early_bias. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.VideoLoaderConfig.check_fps_compatibility" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_fps_compatibility</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.check_fps_compatibility" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">check_fps_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;fps&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;i_frames&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;scene_threshold&quot;</span><span class="p">]</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;fps cannot be used with evenly_sample_total_frames, i_frames, or scene_threshold. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.VideoLoaderConfig.check_frame_indices_compatibility" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_frame_indices_compatibility</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.check_frame_indices_compatibility" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">check_frame_indices_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;frame_indices&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;scene_threshold&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;i_frames&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;early_bias&quot;</span><span class="p">]</span>
        <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;frame_indices cannot be used with total_frames, scene_threshold, i_frames, early_bias, or evenly_sample_total_frames. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.VideoLoaderConfig.check_height_and_width" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_height_and_width</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.check_height_and_width" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">check_height_and_width</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;frame_selection_height&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;frame_selection_width&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Must provide both frame_selection_height and frame_selection_width or neither. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;model_input_height&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">^</span> <span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;model_input_width&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Must provide both model_input_height and model_input_width or neither. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.VideoLoaderConfig.check_i_frame_compatibility" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_i_frame_compatibility</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.check_i_frame_compatibility" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">check_i_frame_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;scene_threshold&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;i_frames&quot;</span><span class="p">]:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;i_frames cannot be used with scene_threshold. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.VideoLoaderConfig.check_megadetector_lite_compatibility" class="doc doc-heading">
<code class="highlight language-python"><span class="n">check_megadetector_lite_compatibility</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.check_megadetector_lite_compatibility" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">check_megadetector_lite_compatibility</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;megadetector_lite_config&quot;</span><span class="p">]</span> <span class="ow">and</span> <span class="p">(</span>
        <span class="n">values</span><span class="p">[</span><span class="s2">&quot;early_bias&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;evenly_sample_total_frames&quot;</span><span class="p">]</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;megadetector_lite_config cannot be used with early_bias or evenly_sample_total_frames. Values provided are </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.VideoLoaderConfig.validate_total_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_total_frames</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.validate_total_frames" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@root_validator</span><span class="p">(</span><span class="n">skip_on_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">validate_total_frames</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;megadetector_lite_config&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># set n frames for megadetector_lite_config if only specified by total_frames</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;megadetector_lite_config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">n_frames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;megadetector_lite_config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">n_frames</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span>

        <span class="c1"># set total frames if only specified in megadetector_lite_config</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">values</span><span class="p">[</span><span class="s2">&quot;total_frames&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s2">&quot;megadetector_lite_config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">n_frames</span>

    <span class="k">return</span> <span class="n">values</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.VideoLoaderConfig.validate_video_cache_dir" class="doc doc-heading">
<code class="highlight language-python"><span class="n">validate_video_cache_dir</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoLoaderConfig.validate_video_cache_dir" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

      <p>Set up cache directory for preprocessed videos. Config argument takes precedence
over environment variable.</p>

        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@validator</span><span class="p">(</span><span class="s2">&quot;cache_dir&quot;</span><span class="p">,</span> <span class="n">always</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">validate_video_cache_dir</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">cache_dir</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set up cache directory for preprocessed videos. Config argument takes precedence</span>
<span class="sd">    over environment variable.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">cache_dir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cache_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;VIDEO_CACHE_DIR&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">cache_dir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cache_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">cache_dir</span><span class="p">)</span>
        <span class="n">cache_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">cache_dir</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="zamba.data.video.VideoMetadata" class="doc doc-heading">
        <code>
VideoMetadata            (<span title="pydantic.main.BaseModel">BaseModel</span>)
        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-model"><code>pydantic-model</code></small>
  </span>

<a href="#zamba.data.video.VideoMetadata" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">VideoMetadata</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">height</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">width</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">duration_s</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">fps</span><span class="p">:</span> <span class="nb">int</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_video</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">):</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">get_video_stream</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">height</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">]),</span>
            <span class="n">width</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]),</span>
            <span class="n">n_frames</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;nb_frames&quot;</span><span class="p">]),</span>
            <span class="n">duration_s</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]),</span>
            <span class="n">fps</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;r_frame_rate&quot;</span><span class="p">])),</span>  <span class="c1"># reported, not average</span>
        <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoMetadata.duration_s" class="doc doc-heading">
<code class="highlight language-python"><span class="n">duration_s</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#zamba.data.video.VideoMetadata.duration_s" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoMetadata.fps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fps</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#zamba.data.video.VideoMetadata.fps" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoMetadata.height" class="doc doc-heading">
<code class="highlight language-python"><span class="n">height</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#zamba.data.video.VideoMetadata.height" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoMetadata.n_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">n_frames</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#zamba.data.video.VideoMetadata.n_frames" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h5 id="zamba.data.video.VideoMetadata.width" class="doc doc-heading">
<code class="highlight language-python"><span class="n">width</span><span class="p">:</span> <span class="nb">int</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-pydantic-field"><code>pydantic-field</code></small>
      <small class="doc doc-property doc-property-required"><code>required</code></small>
  </span>

<a href="#zamba.data.video.VideoMetadata.width" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">

    </div>

  </div>


<h4 id="zamba.data.video.VideoMetadata-classes">Classes<a href="#zamba.data.video.VideoMetadata-classes" class="headerlink" title="Permanent link">&para;</a></h4>

  <div class="doc doc-object doc-class">



<h5 id="zamba.data.video.VideoMetadata.Config" class="doc doc-heading">
        <code>
Config        </code>


  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-inherited"><code>inherited</code></small>
  </span>

<a href="#zamba.data.video.VideoMetadata.Config" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">





  <div class="doc doc-children">





<h6 id="zamba.data.video.VideoMetadata.Config-classes">Classes<a href="#zamba.data.video.VideoMetadata.Config-classes" class="headerlink" title="Permanent link">&para;</a></h6>

  <div class="doc doc-object doc-class">



<h7 id="zamba.data.video.VideoMetadata.Config.getter_dict" class="doc doc-heading">
        <code>
getter_dict            (<span title="pydantic.utils.Representation">Representation</span>)
        </code>



<a href="#zamba.data.video.VideoMetadata.Config.getter_dict" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Hack to make object's smell just enough like dicts for validate_model.</p>
<p>We can't inherit from Mapping[str, Any] because it upsets cython so we have to implement all methods ourselves.</p>



    </div>

  </div>



<h6 id="zamba.data.video.VideoMetadata.Config-methods">Methods<a href="#zamba.data.video.VideoMetadata.Config-methods" class="headerlink" title="Permanent link">&para;</a></h6>

  <div class="doc doc-object doc-method">



<h7 id="zamba.data.video.VideoMetadata.Config.get_field_info" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_field_info</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n">unicode</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoMetadata.Config.get_field_info" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Get properties of FieldInfo from the <code>fields</code> property of the config class.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h7 id="zamba.data.video.VideoMetadata.Config.json_dumps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">json_dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">skipkeys</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">ensure_ascii</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">check_circular</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">allow_nan</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="bp">cls</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">indent</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">separators</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">default</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">sort_keys</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span></code>


<a href="#zamba.data.video.VideoMetadata.Config.json_dumps" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Serialize <code>obj</code> to a JSON formatted <code>str</code>.</p>
<p>If <code>skipkeys</code> is true then <code>dict</code> keys that are not basic types
(<code>str</code>, <code>int</code>, <code>float</code>, <code>bool</code>, <code>None</code>) will be skipped
instead of raising a <code>TypeError</code>.</p>
<p>If <code>ensure_ascii</code> is false, then the return value can contain non-ASCII
characters if they appear in strings contained in <code>obj</code>. Otherwise, all
such characters are escaped in JSON strings.</p>
<p>If <code>check_circular</code> is false, then the circular reference check
for container types will be skipped and a circular reference will
result in an <code>OverflowError</code> (or worse).</p>
<p>If <code>allow_nan</code> is false, then it will be a <code>ValueError</code> to
serialize out of range <code>float</code> values (<code>nan</code>, <code>inf</code>, <code>-inf</code>) in
strict compliance of the JSON specification, instead of using the
JavaScript equivalents (<code>NaN</code>, <code>Infinity</code>, <code>-Infinity</code>).</p>
<p>If <code>indent</code> is a non-negative integer, then JSON array elements and
object members will be pretty-printed with that indent level. An indent
level of 0 will only insert newlines. <code>None</code> is the most compact
representation.</p>
<p>If specified, <code>separators</code> should be an <code>(item_separator, key_separator)</code>
tuple.  The default is <code>(', ', ': ')</code> if <em>indent</em> is <code>None</code> and
<code>(',', ': ')</code> otherwise.  To get the most compact JSON representation,
you should specify <code>(',', ':')</code> to eliminate whitespace.</p>
<p><code>default(obj)</code> is a function that should return a serializable version
of obj or raise TypeError. The default simply raises TypeError.</p>
<p>If <em>sort_keys</em> is true (default: <code>False</code>), then the output of
dictionaries will be sorted by key.</p>
<p>To use a custom <code>JSONEncoder</code> subclass (e.g. one that overrides the
<code>.default()</code> method to serialize additional types), specify it with
the <code>cls</code> kwarg; otherwise <code>JSONEncoder</code> is used.</p>

        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">dumps</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">skipkeys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check_circular</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">allow_nan</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">separators</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Serialize ``obj`` to a JSON formatted ``str``.</span>

<span class="sd">    If ``skipkeys`` is true then ``dict`` keys that are not basic types</span>
<span class="sd">    (``str``, ``int``, ``float``, ``bool``, ``None``) will be skipped</span>
<span class="sd">    instead of raising a ``TypeError``.</span>

<span class="sd">    If ``ensure_ascii`` is false, then the return value can contain non-ASCII</span>
<span class="sd">    characters if they appear in strings contained in ``obj``. Otherwise, all</span>
<span class="sd">    such characters are escaped in JSON strings.</span>

<span class="sd">    If ``check_circular`` is false, then the circular reference check</span>
<span class="sd">    for container types will be skipped and a circular reference will</span>
<span class="sd">    result in an ``OverflowError`` (or worse).</span>

<span class="sd">    If ``allow_nan`` is false, then it will be a ``ValueError`` to</span>
<span class="sd">    serialize out of range ``float`` values (``nan``, ``inf``, ``-inf``) in</span>
<span class="sd">    strict compliance of the JSON specification, instead of using the</span>
<span class="sd">    JavaScript equivalents (``NaN``, ``Infinity``, ``-Infinity``).</span>

<span class="sd">    If ``indent`` is a non-negative integer, then JSON array elements and</span>
<span class="sd">    object members will be pretty-printed with that indent level. An indent</span>
<span class="sd">    level of 0 will only insert newlines. ``None`` is the most compact</span>
<span class="sd">    representation.</span>

<span class="sd">    If specified, ``separators`` should be an ``(item_separator, key_separator)``</span>
<span class="sd">    tuple.  The default is ``(&#39;, &#39;, &#39;: &#39;)`` if *indent* is ``None`` and</span>
<span class="sd">    ``(&#39;,&#39;, &#39;: &#39;)`` otherwise.  To get the most compact JSON representation,</span>
<span class="sd">    you should specify ``(&#39;,&#39;, &#39;:&#39;)`` to eliminate whitespace.</span>

<span class="sd">    ``default(obj)`` is a function that should return a serializable version</span>
<span class="sd">    of obj or raise TypeError. The default simply raises TypeError.</span>

<span class="sd">    If *sort_keys* is true (default: ``False``), then the output of</span>
<span class="sd">    dictionaries will be sorted by key.</span>

<span class="sd">    To use a custom ``JSONEncoder`` subclass (e.g. one that overrides the</span>
<span class="sd">    ``.default()`` method to serialize additional types), specify it with</span>
<span class="sd">    the ``cls`` kwarg; otherwise ``JSONEncoder`` is used.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># cached encoder</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">skipkeys</span> <span class="ow">and</span> <span class="n">ensure_ascii</span> <span class="ow">and</span>
        <span class="n">check_circular</span> <span class="ow">and</span> <span class="n">allow_nan</span> <span class="ow">and</span>
        <span class="bp">cls</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">indent</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">separators</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span>
        <span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">sort_keys</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kw</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_default_encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">JSONEncoder</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">skipkeys</span><span class="o">=</span><span class="n">skipkeys</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="n">ensure_ascii</span><span class="p">,</span>
        <span class="n">check_circular</span><span class="o">=</span><span class="n">check_circular</span><span class="p">,</span> <span class="n">allow_nan</span><span class="o">=</span><span class="n">allow_nan</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="n">indent</span><span class="p">,</span>
        <span class="n">separators</span><span class="o">=</span><span class="n">separators</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="n">sort_keys</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h7 id="zamba.data.video.VideoMetadata.Config.json_loads" class="doc doc-heading">
<code class="highlight language-python"><span class="n">json_loads</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="bp">cls</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">object_hook</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">parse_float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">parse_int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">parse_constant</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">object_pairs_hook</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span></code>


<a href="#zamba.data.video.VideoMetadata.Config.json_loads" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Deserialize <code>s</code> (a <code>str</code>, <code>bytes</code> or <code>bytearray</code> instance
containing a JSON document) to a Python object.</p>
<p><code>object_hook</code> is an optional function that will be called with the
result of any object literal decode (a <code>dict</code>). The return value of
<code>object_hook</code> will be used instead of the <code>dict</code>. This feature
can be used to implement custom decoders (e.g. JSON-RPC class hinting).</p>
<p><code>object_pairs_hook</code> is an optional function that will be called with the
result of any object literal decoded with an ordered list of pairs.  The
return value of <code>object_pairs_hook</code> will be used instead of the <code>dict</code>.
This feature can be used to implement custom decoders.  If <code>object_hook</code>
is also defined, the <code>object_pairs_hook</code> takes priority.</p>
<p><code>parse_float</code>, if specified, will be called with the string
of every JSON float to be decoded. By default this is equivalent to
float(num_str). This can be used to use another datatype or parser
for JSON floats (e.g. decimal.Decimal).</p>
<p><code>parse_int</code>, if specified, will be called with the string
of every JSON int to be decoded. By default this is equivalent to
int(num_str). This can be used to use another datatype or parser
for JSON integers (e.g. float).</p>
<p><code>parse_constant</code>, if specified, will be called with one of the
following strings: -Infinity, Infinity, NaN.
This can be used to raise an exception if invalid JSON numbers
are encountered.</p>
<p>To use a custom <code>JSONDecoder</code> subclass, specify it with the <code>cls</code>
kwarg; otherwise <code>JSONDecoder</code> is used.</p>
<p>The <code>encoding</code> argument is ignored and deprecated since Python 3.1.</p>

        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">loads</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_float</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">parse_int</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_constant</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">object_pairs_hook</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deserialize ``s`` (a ``str``, ``bytes`` or ``bytearray`` instance</span>
<span class="sd">    containing a JSON document) to a Python object.</span>

<span class="sd">    ``object_hook`` is an optional function that will be called with the</span>
<span class="sd">    result of any object literal decode (a ``dict``). The return value of</span>
<span class="sd">    ``object_hook`` will be used instead of the ``dict``. This feature</span>
<span class="sd">    can be used to implement custom decoders (e.g. JSON-RPC class hinting).</span>

<span class="sd">    ``object_pairs_hook`` is an optional function that will be called with the</span>
<span class="sd">    result of any object literal decoded with an ordered list of pairs.  The</span>
<span class="sd">    return value of ``object_pairs_hook`` will be used instead of the ``dict``.</span>
<span class="sd">    This feature can be used to implement custom decoders.  If ``object_hook``</span>
<span class="sd">    is also defined, the ``object_pairs_hook`` takes priority.</span>

<span class="sd">    ``parse_float``, if specified, will be called with the string</span>
<span class="sd">    of every JSON float to be decoded. By default this is equivalent to</span>
<span class="sd">    float(num_str). This can be used to use another datatype or parser</span>
<span class="sd">    for JSON floats (e.g. decimal.Decimal).</span>

<span class="sd">    ``parse_int``, if specified, will be called with the string</span>
<span class="sd">    of every JSON int to be decoded. By default this is equivalent to</span>
<span class="sd">    int(num_str). This can be used to use another datatype or parser</span>
<span class="sd">    for JSON integers (e.g. float).</span>

<span class="sd">    ``parse_constant``, if specified, will be called with one of the</span>
<span class="sd">    following strings: -Infinity, Infinity, NaN.</span>
<span class="sd">    This can be used to raise an exception if invalid JSON numbers</span>
<span class="sd">    are encountered.</span>

<span class="sd">    To use a custom ``JSONDecoder`` subclass, specify it with the ``cls``</span>
<span class="sd">    kwarg; otherwise ``JSONDecoder`` is used.</span>

<span class="sd">    The ``encoding`` argument is ignored and deprecated since Python 3.1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\ufeff</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">JSONDecodeError</span><span class="p">(</span><span class="s2">&quot;Unexpected UTF-8 BOM (decode using utf-8-sig)&quot;</span><span class="p">,</span>
                                  <span class="n">s</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="p">(</span><span class="nb">bytes</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;the JSON object must be str, bytes or bytearray, &#39;</span>
                            <span class="sa">f</span><span class="s1">&#39;not </span><span class="si">{</span><span class="n">s</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">detect_encoding</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="s1">&#39;surrogatepass&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;encoding&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">warnings</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;&#39;encoding&#39; is ignored and deprecated. It will be removed in Python 3.9&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span>
        <span class="p">)</span>
        <span class="k">del</span> <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;encoding&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="p">(</span><span class="bp">cls</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">object_hook</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span>
            <span class="n">parse_int</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">parse_float</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span>
            <span class="n">parse_constant</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">object_pairs_hook</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kw</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_default_decoder</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">cls</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">JSONDecoder</span>
    <span class="k">if</span> <span class="n">object_hook</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;object_hook&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">object_hook</span>
    <span class="k">if</span> <span class="n">object_pairs_hook</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;object_pairs_hook&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">object_pairs_hook</span>
    <span class="k">if</span> <span class="n">parse_float</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;parse_float&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_float</span>
    <span class="k">if</span> <span class="n">parse_int</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;parse_int&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_int</span>
    <span class="k">if</span> <span class="n">parse_constant</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">kw</span><span class="p">[</span><span class="s1">&#39;parse_constant&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parse_constant</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h7 id="zamba.data.video.VideoMetadata.Config.prepare_field" class="doc doc-heading">
<code class="highlight language-python"><span class="n">prepare_field</span><span class="p">(</span><span class="n">field</span><span class="p">:</span> <span class="n">ModelField</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoMetadata.Config.prepare_field" class="headerlink" title="Permanent link">&para;</a></h7>

    <div class="doc doc-contents ">

      <p>Optional hook to check or modify fields during model creation.</p>

    </div>

  </div>





  </div>

    </div>

  </div>





  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.VideoMetadata.from_video" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_video</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
  </span>

<a href="#zamba.data.video.VideoMetadata.from_video" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_video</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">):</span>
    <span class="n">stream</span> <span class="o">=</span> <span class="n">get_video_stream</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="n">height</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">]),</span>
        <span class="n">width</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]),</span>
        <span class="n">n_frames</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;nb_frames&quot;</span><span class="p">]),</span>
        <span class="n">duration_s</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]),</span>
        <span class="n">fps</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;r_frame_rate&quot;</span><span class="p">])),</span>  <span class="c1"># reported, not average</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h3 id="zamba.data.video.npy_cache" class="doc doc-heading">
        <code>
npy_cache        </code>



<a href="#zamba.data.video.npy_cache" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">npy_cache</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">cleanup</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">=</span> <span class="n">cache_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cleanup</span> <span class="o">=</span> <span class="n">cleanup</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">_wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">vid_path</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;filepath&quot;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">vid_path</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">config</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dict</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">config</span> <span class="o">=</span> <span class="n">kwargs</span>

            <span class="c1"># don&#39;t include cleanup in the hashed config</span>
            <span class="n">config</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;cleanup_cache&quot;</span><span class="p">)</span>

            <span class="c1"># hash config for inclusion in filename</span>
            <span class="n">hash_str</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">config</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">opt</span><span class="p">(</span><span class="n">lazy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="s2">&quot;Generated hash </span><span class="si">{hash_str}</span><span class="s2"> from </span><span class="si">{config}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">hash_str</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">hash_str</span><span class="p">,</span>
                <span class="n">config</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">config</span><span class="p">),</span>
            <span class="p">)</span>

            <span class="c1"># strip leading &quot;/&quot; in absolute path</span>
            <span class="n">vid_path</span> <span class="o">=</span> <span class="n">AnyPath</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">vid_path</span><span class="p">)</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">))</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vid_path</span><span class="p">,</span> <span class="n">S3Path</span><span class="p">):</span>
                <span class="n">vid_path</span> <span class="o">=</span> <span class="n">AnyPath</span><span class="p">(</span><span class="n">vid_path</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>

            <span class="n">npy_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">/</span> <span class="n">hash_str</span> <span class="o">/</span> <span class="n">vid_path</span><span class="o">.</span><span class="n">with_suffix</span><span class="p">(</span><span class="s2">&quot;.npy&quot;</span><span class="p">)</span>
            <span class="c1"># make parent directories since we&#39;re using absolute paths</span>
            <span class="n">npy_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">npy_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loading from cache </span><span class="si">{</span><span class="n">npy_path</span><span class="si">}</span><span class="s2">: size </span><span class="si">{</span><span class="n">npy_path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">npy_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loading video from disk: </span><span class="si">{</span><span class="n">vid_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">loaded_video</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">npy_path</span><span class="p">,</span> <span class="n">loaded_video</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Wrote to cache </span><span class="si">{</span><span class="n">npy_path</span><span class="si">}</span><span class="s2">: size </span><span class="si">{</span><span class="n">npy_path</span><span class="o">.</span><span class="n">stat</span><span class="p">()</span><span class="o">.</span><span class="n">st_size</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">loaded_video</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_wrapped</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">f</span>

    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;cache_path&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleanup</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="o">.</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">():</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Deleting cache dir </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
                <span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="s2">&quot;Bravely refusing to delete directory that is not a subdirectory of the &quot;</span>
                    <span class="s2">&quot;system temp directory. If you really want to delete, do so manually using:</span><span class="se">\n</span><span class="s2"> &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;rm -r </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h5 id="zamba.data.video.npy_cache.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">cleanup</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#zamba.data.video.npy_cache.__init__" class="headerlink" title="Permanent link">&para;</a></h5>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cache_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">cleanup</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cache_path</span> <span class="o">=</span> <span class="n">cache_path</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cleanup</span> <span class="o">=</span> <span class="n">cleanup</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>


<h2 id="zamba.data.video-functions">Functions<a href="#zamba.data.video-functions" class="headerlink" title="Permanent link">&para;</a></h2>

  <div class="doc doc-object doc-function">



<h3 id="zamba.data.video.ensure_frame_number" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ensure_frame_number</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">total_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span></code>


<a href="#zamba.data.video.ensure_frame_number" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Ensures the array contains the requested number of frames either by clipping frames from
the end or dulpicating the last frame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>arr</code></td>
        <td><code>np.ndarray</code></td>
        <td><p>Array of video frames with shape (frames, height, width, channel).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>total_frames</code></td>
        <td><code>int</code></td>
        <td><p>Desired number of frames in output array.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ensure_frame_number</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">total_frames</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensures the array contains the requested number of frames either by clipping frames from</span>
<span class="sd">    the end or dulpicating the last frame.</span>

<span class="sd">    Args:</span>
<span class="sd">        arr (np.ndarray): Array of video frames with shape (frames, height, width, channel).</span>
<span class="sd">        total_frames (int): Desired number of frames in output array.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">total_frames</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">total_frames</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">arr</span>
    <span class="k">elif</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="s2">&quot;No frames selected. Returning an array in the desired shape with all zeros.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">total_frames</span><span class="p">,</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;int&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">total_frames</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Clipping </span><span class="si">{</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">total_frames</span><span class="si">}</span><span class="s2"> frames &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;(original: </span><span class="si">{</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">, requested: </span><span class="si">{</span><span class="n">total_frames</span><span class="si">}</span><span class="s2">).&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">arr</span><span class="p">[:</span><span class="n">total_frames</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">total_frames</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Duplicating last frame </span><span class="si">{</span><span class="n">total_frames</span> <span class="o">-</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> times &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;(original: </span><span class="si">{</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">, requested: </span><span class="si">{</span><span class="n">total_frames</span><span class="si">}</span><span class="s2">).&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
            <span class="p">[</span><span class="n">arr</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="n">total_frames</span> <span class="o">-</span> <span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="zamba.data.video.ffprobe" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ffprobe</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Series</span></code>


<a href="#zamba.data.video.ffprobe" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ffprobe</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">flatten_json</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">j</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">yield from</span> <span class="n">flatten_json</span><span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="n">k</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="n">k</span><span class="p">])):</span>
                    <span class="k">yield from</span> <span class="n">flatten_json</span><span class="p">(</span><span class="n">j</span><span class="p">[</span><span class="n">k</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">yield</span> <span class="p">{</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span> <span class="n">j</span><span class="p">[</span><span class="n">k</span><span class="p">]}</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="s2">&quot;ffprobe&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-v&quot;</span><span class="p">,</span>
            <span class="s2">&quot;quiet&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-show_entries&quot;</span><span class="p">,</span>
            <span class="s2">&quot;stream:format&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-select_streams&quot;</span><span class="p">,</span>
            <span class="s2">&quot;v&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-of&quot;</span><span class="p">,</span>
            <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="n">path</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="p">{</span><span class="o">**</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">b</span><span class="p">},</span> <span class="n">flatten_json</span><span class="p">(</span><span class="n">output</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="zamba.data.video.get_frame_time_estimates" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_frame_time_estimates</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">)</span></code>


<a href="#zamba.data.video.get_frame_time_estimates" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_frame_time_estimates</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">):</span>
    <span class="n">probe</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">),</span> <span class="n">show_entries</span><span class="o">=</span><span class="s2">&quot;frame=best_effort_timestamp_time&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;best_effort_timestamp_time&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">probe</span><span class="p">[</span><span class="s2">&quot;frames&quot;</span><span class="p">]]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="zamba.data.video.get_video_stream" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_video_stream</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span> <span class="n">cloudpathlib</span><span class="o">.</span><span class="n">s3</span><span class="o">.</span><span class="n">s3path</span><span class="o">.</span><span class="n">S3Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span></code>


<a href="#zamba.data.video.get_video_stream" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_video_stream</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span> <span class="n">S3Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">probe</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">probe</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ZambaFfmpegException</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">next</span><span class="p">((</span><span class="n">stream</span> <span class="k">for</span> <span class="n">stream</span> <span class="ow">in</span> <span class="n">probe</span><span class="p">[</span><span class="s2">&quot;streams&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">stream</span><span class="p">[</span><span class="s2">&quot;codec_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;video&quot;</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="zamba.data.video.load_video_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">load_video_frames</span><span class="p">(</span><span class="n">filepath</span><span class="p">:</span> <span class="n">PathLike</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">zamba</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">video</span><span class="o">.</span><span class="n">VideoLoaderConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#zamba.data.video.load_video_frames" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Loads frames from videos using fast ffmpeg commands.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filepath</code></td>
        <td><code>os.PathLike</code></td>
        <td><p>Path to the video.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>config</code></td>
        <td><code>VideoLoaderConfig</code></td>
        <td><p>Configuration for video loading.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Optionally, arguments for VideoLoaderConfig can be passed in directly.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>np.ndarray</code></td>
      <td><p>An array of video frames with dimensions (time x height x width x channels).</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">load_video_frames</span><span class="p">(</span>
    <span class="n">filepath</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">VideoLoaderConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Loads frames from videos using fast ffmpeg commands.</span>

<span class="sd">    Args:</span>
<span class="sd">        filepath (os.PathLike): Path to the video.</span>
<span class="sd">        config (VideoLoaderConfig, optional): Configuration for video loading.</span>
<span class="sd">        **kwargs: Optionally, arguments for VideoLoaderConfig can be passed in directly.</span>

<span class="sd">    Returns:</span>
<span class="sd">        np.ndarray: An array of video frames with dimensions (time x height x width x channels).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">Path</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No file found at </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">VideoLoaderConfig</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">video_stream</span> <span class="o">=</span> <span class="n">get_video_stream</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
    <span class="n">w</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">video_stream</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">])</span>
    <span class="n">h</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">video_stream</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">])</span>

    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">filepath</span><span class="p">))</span>
    <span class="n">pipeline_kwargs</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">crop_bottom_pixels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">crop_bottom_pixels</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="c1"># scale to ensure all frames are the same height and we can crop</span>
        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;scale&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">w</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">h</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">crop</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="s2">&quot;iw&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;ih-</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">crop_bottom_pixels</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">-</span> <span class="n">config</span><span class="o">.</span><span class="n">crop_bottom_pixels</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">evenly_sample_total_frames</span><span class="p">:</span>
        <span class="n">config</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">total_frames</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">video_stream</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">early_bias</span><span class="p">:</span>
        <span class="n">config</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="mi">24</span>  <span class="c1"># competition frame selection assumes 24 frames per second</span>
        <span class="n">config</span><span class="o">.</span><span class="n">total_frames</span> <span class="o">=</span> <span class="mi">16</span>  <span class="c1"># used for ensure_total_frames</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">fps</span><span class="p">:</span>
        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;fps&quot;</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">fps</span><span class="p">,</span> <span class="nb">round</span><span class="o">=</span><span class="s2">&quot;up&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">i_frames</span><span class="p">:</span>
        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">,</span> <span class="s2">&quot;eq(pict_type,PICT_TYPE_I)&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">scene_threshold</span><span class="p">:</span>
        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;gt(scene,</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">scene_threshold</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">frame_selection_height</span> <span class="ow">and</span> <span class="n">config</span><span class="o">.</span><span class="n">frame_selection_width</span><span class="p">:</span>
        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
            <span class="s2">&quot;scale&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">frame_selection_width</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">frame_selection_height</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">frame_selection_width</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">frame_selection_height</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">early_bias</span><span class="p">:</span>
        <span class="n">config</span><span class="o">.</span><span class="n">frame_indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">72</span><span class="p">,</span> <span class="mi">84</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">108</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">132</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">156</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">frame_indices</span><span class="p">:</span>
        <span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;eq(n,</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">frame_indices</span><span class="p">))</span>
        <span class="n">pipeline_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;vsync&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

    <span class="n">pipeline</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">output</span><span class="p">(</span>
        <span class="s2">&quot;pipe:&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;rawvideo&quot;</span><span class="p">,</span> <span class="n">pix_fmt</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">pix_fmt</span><span class="p">,</span> <span class="o">**</span><span class="n">pipeline_kwargs</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">out</span><span class="p">,</span> <span class="n">err</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">capture_stdout</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">capture_stderr</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ZambaFfmpegException</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>

    <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">megadetector_lite_config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">mdlite</span> <span class="o">=</span> <span class="n">MegadetectorLiteYoloX</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">megadetector_lite_config</span><span class="p">)</span>
        <span class="n">detection_probs</span> <span class="o">=</span> <span class="n">mdlite</span><span class="o">.</span><span class="n">detect_video</span><span class="p">(</span><span class="n">frames</span><span class="o">=</span><span class="n">arr</span><span class="p">)</span>

        <span class="n">arr</span> <span class="o">=</span> <span class="n">mdlite</span><span class="o">.</span><span class="n">filter_frames</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">detection_probs</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">model_input_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">model_input_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">resized_frames</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span>
            <span class="p">(</span><span class="n">arr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">config</span><span class="o">.</span><span class="n">model_input_height</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">model_input_width</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">ix</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arr</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">config</span><span class="o">.</span><span class="n">model_input_height</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="n">f</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="n">config</span><span class="o">.</span><span class="n">model_input_width</span>
            <span class="p">):</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span>
                    <span class="n">f</span><span class="p">,</span>
                    <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">model_input_width</span><span class="p">,</span> <span class="n">config</span><span class="o">.</span><span class="n">model_input_height</span><span class="p">),</span>
                    <span class="c1"># https://stackoverflow.com/a/51042104/1692709</span>
                    <span class="n">interpolation</span><span class="o">=</span><span class="p">(</span>
                        <span class="n">cv2</span><span class="o">.</span><span class="n">INTER_LINEAR</span>
                        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">config</span><span class="o">.</span><span class="n">model_input_width</span>
                        <span class="k">else</span> <span class="n">cv2</span><span class="o">.</span><span class="n">INTER_AREA</span>
                    <span class="p">),</span>
                <span class="p">)</span>
            <span class="n">resized_frames</span><span class="p">[</span><span class="n">ix</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">resized_frames</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">ensure_total_frames</span><span class="p">:</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">ensure_frame_number</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">total_frames</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">total_frames</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">arr</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="zamba.data.video.num_frames" class="doc doc-heading">
<code class="highlight language-python"><span class="n">num_frames</span><span class="p">(</span><span class="n">stream_or_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span> <span class="n">cloudpathlib</span><span class="o">.</span><span class="n">s3</span><span class="o">.</span><span class="n">s3path</span><span class="o">.</span><span class="n">S3Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span></code>


<a href="#zamba.data.video.num_frames" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">


        <details class="quote">
          <summary>Source code in <code>zamba/data/video.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">num_frames</span><span class="p">(</span><span class="n">stream_or_path</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">,</span> <span class="n">S3Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stream_or_path</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">get_video_stream</span><span class="p">(</span><span class="n">stream_or_path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">stream_or_path</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">stream</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="s2">&quot;nb_frames&quot;</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;nb_frames&quot;</span><span class="p">])</span>

    <span class="k">if</span> <span class="s2">&quot;duration&quot;</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="s2">&quot;r_frame_rate&quot;</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">frame_rate</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;r_frame_rate&quot;</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="s2">&quot;avg_frame_rate&quot;</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">frame_rate</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">stream</span><span class="p">[</span><span class="s2">&quot;avg_frame_rate&quot;</span><span class="p">])</span>
        <span class="n">duration</span> <span class="o">-=</span> <span class="nb">float</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;start_time&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">floor</span><span class="p">(</span><span class="n">duration</span> <span class="o">*</span> <span class="n">frame_rate</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../data-metadata/" class="md-footer__link md-footer__link--prev" aria-label="Previous: zamba.data.metadata" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              zamba.data.metadata
            </div>
          </div>
        </a>
      
      
        
        <a href="../models-config/" class="md-footer__link md-footer__link--next" aria-label="Next: zamba.models.config" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              zamba.models.config
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.bd0b6b67.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.467223ff.min.js"></script>
      
    
  </body>
</html>